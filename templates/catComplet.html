{% extends "base.html" %}

{{
"""
    context = {"competition" : competition,
               "categories": categories,
               "selectedCat": category,
               "leg":legInGet,
               "ctrlName": listCtrlPointsName,
               "results": itertools.zip_longest(qResults, listeComplement, listeResultats),
               "type":typeFormat}

"""
}}

{% block titre %}
<title>{{ competition.name }} - catÃ©gorie {{selectedCat.name}} {% if leg > 0 %}- leg {{ leg }}{% endif %}</title>
{% endblock %}

{% block style %}
/* CSS pour une table avec des marges sticky */
.table-responsive {
	height:calc(100vh - 6rem);

	& table {
		table-layout: fixed;
		& th, td { 
			width:5em;
		}
		& th:nth-of-type(2), td:nth-of-type(2) {
			width:200px;
			position : sticky;
			left:5em;
		}
	}

	& thead tr {
		position : sticky;
		top:0;
		text-align:center;
		z-index:1;
	}

	& thead tr th:nth-of-type(1) {
		text-align:center;
		position : sticky;
		left:0;
		text-align:center;
	}
	& tr td:nth-of-type(1) {
		text-align:center;
		position : sticky;
		left:0;
		text-align:center;
	}

}
{% endblock %}

{% block content %}

<h1 class="text-body-emphasis">{{ competition.name }}</h1>

{% include "categoryListComponent.html" with sFD="checked" %}

<h2 class="text-body-emphasis">{{ selectedCat.name }}{% if leg > 0 %} - leg {{ leg }}{% endif %}</h2>
<div class="table-responsive">
<table class="table table-striped table-dark table-hover">
<caption>Classement non officiel</caption>
<thead>
    <tr>
        <th scope="col">Place</th>
        <th scope="col">Nom (Club)</th>
        {% for ctrl in ctrlName %}
            <th scope="col">{{ ctrl }}</th>
        {% endfor %}
    </tr>
</thead>
<tbody>
    {% for q, complement, rlist in results %}
    <tr>
        <td scope="row">{{ forloop.counter }}</td>
        <td>
        {% if type == "run" %}
                {{ q.name }}{% if c %} - ({{ c }}){% endif %}

        {% else %}
            <a class="link-light"
                href="{% url 'results:team' comp_id=competition.cid cls_id=selectedCat.id team_id=q.id %}">
                {{ q.name }}{% if complement %} ({{ complement }}){% endif %}
            </a>
        {% endif %}
        </td>

        {% for r in rlist %}
            <td>{{ r }}</td>
        {% endfor %}
    </tr>
	{% empty %}
    <tr>
    </tr>
    {% endfor %}
</tbody>
</table>
</div>

{% endblock %}
